# Environment Setup Guide

This guide helps you configure all required environment variables for HYPEYA miniapp with OnchainKit and MiniKit integration.

## Required Environment Variables

### 1. Core OnchainKit Configuration

```bash
# Required - Get from Coinbase Developer Platform
NEXT_PUBLIC_ONCHAINKIT_PROJECT_NAME="HYPEYA"
NEXT_PUBLIC_URL="https://your-app.vercel.app"
NEXT_PUBLIC_ONCHAINKIT_API_KEY="your_cdp_client_api_key"
```

**How to get API Key:**

1. Visit [Coinbase Developer Platform](https://portal.cdp.coinbase.com/)
2. Create an account or sign in
3. Create a new project
4. Generate a Client API Key
5. Copy the API key to your `.env.local`

### 2. Farcaster Integration

```bash
# Required - Generated by `npx create-onchain --manifest`
FARCASTER_HEADER="base64_header"
FARCASTER_PAYLOAD="base64_payload"
FARCASTER_SIGNATURE="hex_signature"
```

**How to generate:**

```bash
npx create-onchain --manifest
```

### 3. App Metadata (Optional - Enhances MiniKit Experience)

```bash
NEXT_PUBLIC_APP_ICON="https://your-app.vercel.app/images/hypeya-logo.png"
NEXT_PUBLIC_APP_SUBTITLE="Web3 Content Platform"
NEXT_PUBLIC_APP_DESCRIPTION="Discover and support creators with crypto on Base"
NEXT_PUBLIC_APP_SPLASH_IMAGE="https://your-app.vercel.app/images/hypeya-logo.png"
NEXT_PUBLIC_SPLASH_BACKGROUND_COLOR="#000000"
NEXT_PUBLIC_APP_PRIMARY_CATEGORY="social"
NEXT_PUBLIC_APP_HERO_IMAGE="https://your-app.vercel.app/og.png"
NEXT_PUBLIC_APP_TAGLINE="Support creators with crypto"
NEXT_PUBLIC_APP_OG_TITLE="HYPEYA - Web3 Content Platform"
NEXT_PUBLIC_APP_OG_DESCRIPTION="Discover, read, and support creators with crypto on Base"
NEXT_PUBLIC_APP_OG_IMAGE="https://your-app.vercel.app/og.png"
```

## Quick Setup Steps

### 1. Copy Environment Template

```bash
cp .env.example .env.local
```

### 2. Edit `.env.local` with Your Values

```bash
# Replace with your actual domain
NEXT_PUBLIC_URL="https://hypeya-miniapp.vercel.app"

# Add your CDP API key
NEXT_PUBLIC_ONCHAINKIT_API_KEY="your_actual_api_key_here"

# Update WordPress credentials
WP_API_USERNAME="your_wp_username"
WP_API_KEY="your_wp_app_password"
```

### 3. Generate Farcaster Manifest (Optional)

```bash
npx create-onchain --manifest
```

This will generate the Farcaster integration values.

### 4. Test Configuration

```bash
npm run dev
```

Visit `http://localhost:3000` and check the browser console for any configuration warnings.

## Production Deployment (Vercel)

### 1. Set Environment Variables in Vercel

1. Go to your Vercel project dashboard
2. Navigate to **Settings** â†’ **Environment Variables**
3. Add each variable from your `.env.local`
4. Make sure to set them for **Production**, **Preview**, and **Development**

### 2. Required Production Variables

**Minimum required for production:**

```bash
NEXT_PUBLIC_ONCHAINKIT_PROJECT_NAME="HYPEYA"
NEXT_PUBLIC_URL="https://your-actual-domain.vercel.app"
NEXT_PUBLIC_ONCHAINKIT_API_KEY="your_production_api_key"
WP_API_USERNAME="your_wp_username"
WP_API_KEY="your_wp_app_password"
```

### 3. Deploy

```bash
git add .
git commit -m "Add environment configuration"
git push origin main
```

## Verification

### Check MiniKit Integration

1. **Development**: Open app in browser, check console for MiniKit detection
2. **Production**: Open app in Coinbase Wallet mobile app
3. **Status Component**: Add `<MiniKitStatus />` to see environment details

### Example Verification Component

```tsx
import { MiniKitStatus } from "@/components/web3";

export default function HomePage() {
  return (
    <div>
      <h1>HYPEYA</h1>
      <MiniKitStatus />
      {/* Your app content */}
    </div>
  );
}
```

## Troubleshooting

### Common Issues

1. **"API Key not found"**

   - Check `NEXT_PUBLIC_ONCHAINKIT_API_KEY` is set
   - Verify API key is valid in CDP console

2. **"MiniKit not detected"**

   - Test in Coinbase Wallet mobile app
   - Check `NEXT_PUBLIC_URL` matches deployment URL

3. **"Farcaster integration failed"**
   - Run `npx create-onchain --manifest`
   - Copy generated values to environment variables

### Environment Priority

1. `.env.local` (local development)
2. Vercel environment variables (production)
3. `.env.example` (template only)

**Never commit `.env.local` to git!**

## Security Notes

- Keep API keys private
- Use different keys for development/production
- Regularly rotate sensitive credentials
- Monitor API usage in CDP console

## Next Steps

After setting up environment variables:

1. Test local development with `npm run dev`
2. Verify MiniKit integration in Coinbase Wallet
3. Deploy to Vercel with production variables
4. Test production deployment in both web and MiniKit
5. Monitor API usage and performance
